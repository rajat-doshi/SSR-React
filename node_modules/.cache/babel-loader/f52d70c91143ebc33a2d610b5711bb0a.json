{"ast":null,"code":"import axios from\"axios\";import{API_URL}from\"../Config\";import{getToken,getServerValidation}from\"../Helper\";import{te}from\"../ReduxToaster\";export var get=function get(url){var isPrivate=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var responseType=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var customUrl=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var headers=arguments.length>4?arguments[4]:undefined;var apiUrl=API_URL+url;if(customUrl){apiUrl=url;}if(isPrivate&&getToken()){var isParam=apiUrl.includes(\"?\");if(isParam)apiUrl=\"\".concat(apiUrl,\"&&api_token=\").concat(getToken());else apiUrl=\"\".concat(apiUrl,\"?api_token=\").concat(getToken());}var axiosObj={method:\"get\",url:apiUrl};if(headers){axiosObj.headers=headers;}if(responseType)axiosObj.responseType=responseType;return axios(axiosObj).then(function(response){return handleResponse(response);}).catch(function(error){return handleError(error);});};export var post=function post(url){var bodyObj=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var isPrivate=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var mediaFile=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var uat=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var apiUrl=!uat?API_URL+url:url;if(isPrivate&&getToken()){if(bodyObj instanceof FormData)bodyObj.append(\"api_token\",getToken());else bodyObj.api_token=getToken();}if(mediaFile==true){var formData=new FormData();Object.keys(bodyObj).map(function(key){formData.append(key,bodyObj[key]);});bodyObj=formData;}return axios.post(apiUrl,bodyObj).then(function(response){return handleResponse(response);}).catch(function(error){return handleError(error);});};var handleResponse=function handleResponse(response){return{error:false,data:response.data};};var handleError=function handleError(error){var response=error.response;var errorMsg=\"Sorry, something went wrong. Please try again.\";if(response&&response.status===422){// handle server validation\nif(response.data&&response.data.errors)errorMsg=getServerValidation(response.data.errors)||errorMsg;else if(response.data.message)errorMsg=response.data.message;}else if(response&&response.status==401){// Unauthorized\nvar element=document.getElementById(\"unauthorized-box\");if(element){element.style.display=\"block\";errorMsg=null;}}console.log(\"API ERROR ::: \",JSON.stringify(response));if(errorMsg){te(errorMsg);}return{error:true,message:response?response.data.message:null,status:response?response.status:null};};","map":{"version":3,"sources":["/home/bacancy/Desktop/valtech/SSR-React/src/Utility/Services/httpInterceptor.js"],"names":["axios","API_URL","getToken","getServerValidation","te","get","url","isPrivate","responseType","customUrl","headers","apiUrl","isParam","includes","axiosObj","method","then","response","handleResponse","catch","error","handleError","post","bodyObj","mediaFile","uat","FormData","append","api_token","formData","Object","keys","map","key","data","errorMsg","status","errors","message","element","document","getElementById","style","display","console","log","JSON","stringify"],"mappings":"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","sourcesContent":["\nimport axios from \"axios\";\nimport { API_URL } from \"../Config\";\nimport { getToken, getServerValidation } from \"../Helper\";\nimport { te } from \"../ReduxToaster\";\nexport const get = (\n  url,\n  isPrivate = true,\n  responseType = null,\n  customUrl = false,\n  headers\n) => {\n  let apiUrl = API_URL + url;\n  if (customUrl) {\n    apiUrl = url;\n  }\n  if (isPrivate && getToken()) {\n    const isParam = apiUrl.includes(\"?\");\n    if (isParam) apiUrl = `${apiUrl}&&api_token=${getToken()}`;\n    else apiUrl = `${apiUrl}?api_token=${getToken()}`;\n  }\n  const axiosObj = {\n    method: \"get\",\n    url: apiUrl\n  };\n  if (headers) {\n    axiosObj.headers = headers;\n  }\n  if (responseType) axiosObj.responseType = responseType;\n  return axios(axiosObj)\n    .then(response => handleResponse(response))\n    .catch(error => handleError(error));\n};\nexport const post = (\n  url,\n  bodyObj = {},\n  isPrivate = true,\n  mediaFile = false,\n  uat = false\n) => {\n  const apiUrl = !uat ? API_URL + url : url;\n\n  if (isPrivate && getToken()) {\n    if (bodyObj instanceof FormData) bodyObj.append(\"api_token\", getToken());\n    else bodyObj.api_token = getToken();\n  }\n  if (mediaFile == true) {\n    let formData = new FormData();\n    Object.keys(bodyObj).map(key => {\n      formData.append(key, bodyObj[key]);\n    });\n    bodyObj = formData;\n  }\n  return axios\n    .post(apiUrl, bodyObj)\n    .then(response => handleResponse(response))\n    .catch(error => handleError(error));\n};\nconst handleResponse = response => {\n  return {\n    error: false,\n    data: response.data\n  };\n};\nconst handleError = error => {\n  const { response } = error;\n  let errorMsg = \"Sorry, something went wrong. Please try again.\";\n  if (response && response.status === 422) {\n    // handle server validation\n    if (response.data && response.data.errors)\n      errorMsg = getServerValidation(response.data.errors) || errorMsg;\n    else if (response.data.message) errorMsg = response.data.message;\n  } else if (response && response.status == 401) {\n    // Unauthorized\n    let element = document.getElementById(\"unauthorized-box\");\n    if (element) {\n      element.style.display = \"block\";\n      errorMsg = null;\n    }\n  }\n  console.log(\"API ERROR ::: \", JSON.stringify(response));\n  if (errorMsg) {\n    te(errorMsg);\n  }\n  return {\n    error: true,\n    message: response ? response.data.message : null,\n    status: response ? response.status : null\n  };\n};\n\n"]},"metadata":{},"sourceType":"module"}